<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GitHub → Raw .lua Converter</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#7c3aed}
    *{box-sizing:border-box}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Robotto,Arial;margin:0;background:linear-gradient(180deg,#071021 0%, #081226 100%);color:#e6eef6;display:flex;align-items:center;justify-content:center;height:100vh;padding:20px}
    .card{width:100%;max-width:760px;background:var(--card);padding:22px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,.6)}
    h1{margin:0 0 10px;font-weight:600;font-size:18px}
    p{margin:0 0 16px;color:var(--muted);font-size:13px}
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input[type=text]{width:100%;padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:#071427;color:inherit;font-size:14px}
    .row{display:flex;gap:8px;margin-top:12px}
    button{background:var(--accent);border:0;color:white;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:600}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);font-weight:500}
    textarea{width:100%;height:110px;margin-top:12px;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:#051223;color:inherit;font-family:monospace;font-size:13px}
    .muted{color:var(--muted);font-size:13px;margin-top:8px}
    .error{color:#ffb4b4}
    .footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px;color:var(--muted);font-size:13px}
    @media (max-width:520px){.row{flex-direction:column}}
  </style>
</head>
<body>
  <main class="card">
    <h1>GitHub → Raw .lua Converter</h1>
    <p>Paste a GitHub URL (file view or raw) and get a ready-to-use `loadstring(game:HttpGet("...") )()` snippet for Lua executors.</p><label for="url">GitHub URL</label>
<input id="url" type="text" placeholder="https://github.com/username/repo/blob/main/script.lua" autocomplete="off" />

<div class="row">
  <button id="convert">Convert</button>
  <button id="clear" class="ghost">Clear</button>
  <button id="paste" class="ghost">Paste (from clipboard)</button>
</div>

<div id="resultWrap">
  <label for="result">Output</label>
  <textarea id="result" readonly placeholder="Converted snippet will appear here..."></textarea>
  <div class="row" style="margin-top:8px">
    <button id="copy">Copy snippet</button>
    <button id="open" class="ghost">Open raw URL</button>
  </div>
</div>

<div class="footer">
  <div id="message" class="muted">Supports both raw.githubusercontent.com URLs and regular github.com blob URLs.</div>
  <div style="font-size:12px;color:var(--muted)">Made for you</div>
</div>

  </main>  <script>
    const urlIn = document.getElementById('url');
    const convertBtn = document.getElementById('convert');
    const clearBtn = document.getElementById('clear');
    const pasteBtn = document.getElementById('paste');
    const resultTA = document.getElementById('result');
    const copyBtn = document.getElementById('copy');
    const openBtn = document.getElementById('open');
    const message = document.getElementById('message');

    function toRaw(u){
      if(!u) return null;
      try{ u = u.trim(); } catch(e){return null}
      // if already raw
      if(u.includes('raw.githubusercontent.com')) return u;
      // typical github file url
      if(u.includes('github.com')){
        // remove query/hash
        const clean = u.split(/[?#]/)[0];
        // replace domain and remove /blob/
        let out = clean.replace('github.com','raw.githubusercontent.com');
        out = out.replace('/blob/','/');
        return out;
      }
      return null;
    }

    function makeSnippet(raw){
      return `loadstring(game:HttpGet("${raw}"))()`;
    }

    convertBtn.addEventListener('click', ()=>{
      const val = urlIn.value.trim();
      if(!val){ message.textContent = 'Please enter a URL.'; message.classList.remove('muted'); message.classList.add('error'); resultTA.value = ''; return }
      if(!val.toLowerCase().includes('.lua')){
        message.textContent = 'Error: The URL does not appear to be a Lua (.lua) file.'; message.classList.remove('muted'); message.classList.add('error'); resultTA.value = '';
        return;
      }
      const raw = toRaw(val);
      if(!raw){ message.textContent = 'Could not convert the URL. Make sure it is a GitHub file URL.'; message.classList.remove('muted'); message.classList.add('error'); resultTA.value = ''; return }
      // ensure it ends with .lua path (in case of trailing slash)
      const rawNoSlash = raw.replace(/\/+$/,'');
      resultTA.value = makeSnippet(rawNoSlash);
      message.textContent = 'Converted successfully.'; message.classList.remove('error'); message.classList.add('muted');
      openBtn.dataset.raw = rawNoSlash;
    });

    clearBtn.addEventListener('click', ()=>{ urlIn.value=''; resultTA.value=''; message.textContent='Cleared.'; message.classList.remove('error'); message.classList.add('muted'); openBtn.dataset.raw=''; });

    pasteBtn.addEventListener('click', async ()=>{
      try{
        const text = await navigator.clipboard.readText();
        urlIn.value = text;
        message.textContent = 'Pasted from clipboard.'; message.classList.remove('error'); message.classList.add('muted');
      }catch(e){ message.textContent = 'Clipboard read not supported in this browser.'; message.classList.remove('muted'); message.classList.add('error'); }
    });

    copyBtn.addEventListener('click', async ()=>{
      const txt = resultTA.value;
      if(!txt) { message.textContent='Nothing to copy.'; message.classList.remove('muted'); message.classList.add('error'); return }
      try{ await navigator.clipboard.writeText(txt); message.textContent='Snippet copied to clipboard.'; message.classList.remove('error'); message.classList.add('muted'); }
      catch(e){ message.textContent='Copy failed. (Browser may block clipboard access)'; message.classList.remove('muted'); message.classList.add('error'); }
    });

    openBtn.addEventListener('click', ()=>{
      const raw = openBtn.dataset.raw;
      if(!raw) { message.textContent='No raw URL available. Convert first.'; message.classList.remove('muted'); message.classList.add('error'); return }
      window.open(raw, '_blank');
    });
    
    urlIn.addEventListener('keydown', (e)=>{ if(e.key === 'Enter'){ e.preventDefault(); convertBtn.click(); } });
  </script></body>
</html>
